/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
function _0x5ce0(_0x457653,_0x30b8a4){const _0xd65e0c=_0xd65e();return _0x5ce0=function(_0x5ce07d,_0xf29391){_0x5ce07d=_0x5ce07d-0x132;let _0x2948fe=_0xd65e0c[_0x5ce07d];return _0x2948fe;},_0x5ce0(_0x457653,_0x30b8a4);}const _0xf28f82=_0x5ce0;(function(_0x2153d8,_0x53e03f){const _0x3fb7d9=_0x5ce0,_0x43b0a4=_0x2153d8();while(!![]){try{const _0x24a881=-parseInt(_0x3fb7d9(0x165))/0x1*(-parseInt(_0x3fb7d9(0x151))/0x2)+-parseInt(_0x3fb7d9(0x144))/0x3+parseInt(_0x3fb7d9(0x14f))/0x4+parseInt(_0x3fb7d9(0x169))/0x5+parseInt(_0x3fb7d9(0x15f))/0x6*(-parseInt(_0x3fb7d9(0x154))/0x7)+parseInt(_0x3fb7d9(0x143))/0x8+parseInt(_0x3fb7d9(0x13f))/0x9*(-parseInt(_0x3fb7d9(0x13d))/0xa);if(_0x24a881===_0x53e03f)break;else _0x43b0a4['push'](_0x43b0a4['shift']());}catch(_0x477273){_0x43b0a4['push'](_0x43b0a4['shift']());}}}(_0xd65e,0x26619));import{ContextPlugin as _0x43fb32}from'ckeditor5/src/core.js';import{Collection as _0x40a566,CKEditorError as _0x2cce7f}from'ckeditor5/src/utils.js';import _0x110710 from'./websocketgateway.js';function _0xd65e(){const _0x7021df=['276150rkQvzf','listenTo','63TyiIeS','_uniqueUsersCount','addUser','_registeredSessions','1119200IfTgue','164604GLneBb','change:state','has','_handleSessionAdd','_createUser','size','set','get','sessionId','_users','context','290392nXivsN','getUserRole','12728uQGsdK','sessions-unregister-not-exist','mySessionId','658RGkmDB','remove','plugins','Sessions','role','clear','add','connected','fire','forEach','delete','1878dhzQTS','getUserBySessionId','defineMe','values','getUser','channelSessions','13pIdGLB','assign','sessions-register-already-registered','init','697870YIRFof','_handleSessionRemove','register','allConnectedUsers','connection','sessionAdd:','getUserSessions','channelConnectedUsers','isMe','user','requires','orderNumber','unregister','stopListening','pluginName','state'];_0xd65e=function(){return _0x7021df;};return _0xd65e();}import{Users as _0x4d590b}from'ckeditor5-collaboration/src/collaboration-core.js';export default class r extends _0x43fb32{static get[_0xf28f82(0x13b)](){const _0x1e76de=_0xf28f82;return _0x1e76de(0x157);}static get[_0xf28f82(0x137)](){return[_0x110710,_0x4d590b];}constructor(_0x54eb5f){const _0x460349=_0xf28f82;super(_0x54eb5f),this[_0x460349(0x164)]=new Map(),this[_0x460349(0x134)]=new Map(),this[_0x460349(0x16c)]=new _0x40a566(),this[_0x460349(0x142)]=new Map(),this[_0x460349(0x140)]=0x0,this[_0x460349(0x14d)]=this[_0x460349(0x14e)][_0x460349(0x156)][_0x460349(0x14b)](_0x4d590b);}[_0xf28f82(0x168)](){const _0x1a8e9c=_0xf28f82,_0x3ddfbf=this[_0x1a8e9c(0x14e)][_0x1a8e9c(0x156)][_0x1a8e9c(0x14b)](_0x110710);this[_0x1a8e9c(0x13e)](_0x3ddfbf,_0x1a8e9c(0x145),(_0x13f8bc,_0x219323,_0x2c33e1)=>{const _0x50d7c7=_0x1a8e9c;if(_0x50d7c7(0x15b)!==_0x2c33e1)this[_0x50d7c7(0x164)][_0x50d7c7(0x15d)](_0x249c93=>_0x249c93[_0x50d7c7(0x159)]()),this[_0x50d7c7(0x134)][_0x50d7c7(0x15d)](_0x5b0c0a=>_0x5b0c0a[_0x50d7c7(0x159)]()),this[_0x50d7c7(0x16c)][_0x50d7c7(0x159)]();else{for(const [_0x248821,_0xe1bf33]of this[_0x50d7c7(0x142)])for(const _0x1ae8e5 of _0xe1bf33)this[_0x50d7c7(0x147)](_0x248821,_0x1ae8e5);}}),this[_0x1a8e9c(0x148)](_0x3ddfbf[_0x1a8e9c(0x16d)]['me'],!0x0);}[_0xf28f82(0x16b)](_0x48af40,_0x14ef1a){const _0x259789=_0xf28f82;if(this[_0x259789(0x142)][_0x259789(0x146)](_0x48af40))throw new _0x2cce7f(_0x259789(0x167),null,{'channelId':_0x48af40});this[_0x259789(0x142)][_0x259789(0x14a)](_0x48af40,_0x14ef1a),this[_0x259789(0x164)][_0x259789(0x14a)](_0x48af40,new _0x40a566()),this[_0x259789(0x134)][_0x259789(0x14a)](_0x48af40,new _0x40a566()),this[_0x259789(0x13e)](_0x14ef1a,_0x259789(0x15a),(_0x2ec980,_0x2de33f)=>this[_0x259789(0x147)](_0x48af40,_0x2de33f)),this[_0x259789(0x13e)](_0x14ef1a,_0x259789(0x155),(_0xadf0c9,_0x43153b)=>this[_0x259789(0x16a)](_0x48af40,_0x43153b));for(const _0x18e812 of _0x14ef1a)this[_0x259789(0x147)](_0x48af40,_0x18e812);}[_0xf28f82(0x139)](_0x2e0ce3){const _0x217ccd=_0xf28f82;if(!this[_0x217ccd(0x142)][_0x217ccd(0x146)](_0x2e0ce3))throw new _0x2cce7f(_0x217ccd(0x152),null,{'channelId':_0x2e0ce3});const _0x211be3=this[_0x217ccd(0x142)][_0x217ccd(0x14b)](_0x2e0ce3);this[_0x217ccd(0x13a)](_0x211be3);for(const _0x3cddd1 of _0x211be3)_0x217ccd(0x15b)===this[_0x217ccd(0x14e)][_0x217ccd(0x156)][_0x217ccd(0x14b)](_0x110710)[_0x217ccd(0x13c)]&&this[_0x217ccd(0x16a)](_0x2e0ce3,_0x3cddd1);this[_0x217ccd(0x142)][_0x217ccd(0x15e)](_0x2e0ce3),this[_0x217ccd(0x164)][_0x217ccd(0x15e)](_0x2e0ce3),this[_0x217ccd(0x134)][_0x217ccd(0x15e)](_0x2e0ce3);}get[_0xf28f82(0x153)](){const _0x39006d=_0xf28f82;return this[_0x39006d(0x14e)][_0x39006d(0x156)][_0x39006d(0x14b)](_0x110710)[_0x39006d(0x16d)][_0x39006d(0x14c)];}[_0xf28f82(0x160)](_0x1550ff){const _0x45cd8c=_0xf28f82;for(const _0xfc7285 of this[_0x45cd8c(0x164)][_0x45cd8c(0x162)]())for(const _0x55df9b of _0xfc7285)if(_0x55df9b['id']===_0x1550ff)return _0x55df9b[_0x45cd8c(0x136)];}[_0xf28f82(0x133)](_0x484b63,_0x3765c5){const _0x1fe638=_0xf28f82,_0x47b64e=_0x3765c5?[this[_0x1fe638(0x164)][_0x1fe638(0x14b)](_0x3765c5)]:this[_0x1fe638(0x164)][_0x1fe638(0x162)](),_0x59de05=new Set();for(const _0x5ac7ef of _0x47b64e)for(const _0x4b7094 of _0x5ac7ef)_0x4b7094[_0x1fe638(0x136)]['id']===_0x484b63['id']&&_0x59de05[_0x1fe638(0x15a)](_0x4b7094['id']);return _0x59de05;}[_0xf28f82(0x150)](_0x11ca09){const _0x14b72b=_0xf28f82;for(const _0x174518 of this[_0x14b72b(0x164)][_0x14b72b(0x162)]())for(const _0x5b25ab of _0x174518)if(_0x5b25ab[_0x14b72b(0x136)]===_0x11ca09)return _0x5b25ab[_0x14b72b(0x158)];}[_0xf28f82(0x147)](_0x1423d8,_0x2554fe){const _0x381b8a=_0xf28f82;if(_0x381b8a(0x15b)!==this[_0x381b8a(0x14e)][_0x381b8a(0x156)][_0x381b8a(0x14b)](_0x110710)[_0x381b8a(0x13c)])return;const _0x980f4f=_0x2554fe[_0x381b8a(0x136)],_0x9e2ffd=this[_0x381b8a(0x14d)][_0x381b8a(0x163)](_0x980f4f['id'])||this[_0x381b8a(0x148)](_0x980f4f),_0x49cdf9=Object[_0x381b8a(0x166)]({},_0x2554fe,{'user':_0x9e2ffd});this[_0x381b8a(0x164)][_0x381b8a(0x14b)](_0x1423d8)[_0x381b8a(0x15a)](_0x49cdf9);const _0x54e141=this[_0x381b8a(0x134)][_0x381b8a(0x14b)](_0x1423d8);_0x54e141[_0x381b8a(0x146)](_0x9e2ffd['id'])||_0x54e141[_0x381b8a(0x15a)](_0x9e2ffd),this[_0x381b8a(0x16c)][_0x381b8a(0x146)](_0x9e2ffd['id'])||this[_0x381b8a(0x16c)][_0x381b8a(0x15a)](_0x9e2ffd,_0x9e2ffd[_0x381b8a(0x135)]?0x0:void 0x0),this[_0x381b8a(0x15c)](_0x381b8a(0x132)+_0x1423d8,{'channelId':_0x1423d8,'session':_0x49cdf9});}[_0xf28f82(0x16a)](_0x374976,_0x221efe){const _0x7ad3da=_0xf28f82;if(_0x7ad3da(0x15b)!==this[_0x7ad3da(0x14e)][_0x7ad3da(0x156)][_0x7ad3da(0x14b)](_0x110710)[_0x7ad3da(0x13c)])return;const _0x487a72=this[_0x7ad3da(0x134)][_0x7ad3da(0x14b)](_0x374976),_0x5c19eb=_0x221efe[_0x7ad3da(0x136)];_0x5c19eb['id']&&(this[_0x7ad3da(0x164)][_0x7ad3da(0x14b)](_0x374976)[_0x7ad3da(0x155)](_0x221efe['id']),_0x487a72[_0x7ad3da(0x146)](_0x5c19eb['id'])&&!this[_0x7ad3da(0x133)](_0x5c19eb,_0x374976)[_0x7ad3da(0x149)]&&_0x487a72[_0x7ad3da(0x155)](_0x5c19eb['id']),this[_0x7ad3da(0x16c)][_0x7ad3da(0x14b)](_0x5c19eb['id'])&&!this[_0x7ad3da(0x133)](_0x5c19eb)[_0x7ad3da(0x149)]&&this[_0x7ad3da(0x16c)][_0x7ad3da(0x155)](_0x5c19eb['id']));}[_0xf28f82(0x148)](_0x5dd438,_0x64086a){const _0x48166a=_0xf28f82,_0x2ed239=this[_0x48166a(0x14d)][_0x48166a(0x141)](_0x5dd438);return _0x64086a&&this[_0x48166a(0x14d)][_0x48166a(0x161)](_0x5dd438['id']),_0x2ed239[_0x48166a(0x138)]=this[_0x48166a(0x140)]++,_0x2ed239;}}