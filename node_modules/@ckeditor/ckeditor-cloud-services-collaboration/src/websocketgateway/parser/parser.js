/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Decoder as _0x3929bf,Encoder as _0x16c9cd,PacketType}from'socket.io-parser';import _0x511ed6 from'./packetparser.js';import _0x1e5471 from'./parserutils.js';export const ENCODED_TYPES=[PacketType['EVENT'],PacketType['ACK'],PacketType['BINARY_ACK'],PacketType['BINARY_EVENT']];export class Encoder extends _0x16c9cd{constructor(_0x1a7cf9=new _0x511ed6()){super(),this['_packetParser']=_0x1a7cf9;}['encode'](_0x55fa6c){if(ENCODED_TYPES['includes'](_0x55fa6c['type']))try{return[this['_packetParser']['encode'](_0x55fa6c['type'],_0x55fa6c['data'],_0x55fa6c['id'],_0x55fa6c['nsp'])];}catch(_0xd5e3e2){console['error']('Can\x20not\x20properly\x20serialize\x20or\x20deserialize\x20messages.\x20Check\x20the\x20original\x20error.',{'originalError':{'message':_0xd5e3e2['message']}});}return super['encode'](_0x55fa6c);}}export class Decoder extends _0x3929bf{constructor(_0x32e618=new _0x511ed6()){super(),this['_packetParser']=_0x32e618;}['add'](_0x2c1f3f){if(!_0x1e5471['isBuffer'](_0x2c1f3f))return super['add'](_0x2c1f3f);let _0x4f7d9d;try{_0x4f7d9d=this['_packetParser']['decode'](_0x2c1f3f)['packet'];}catch(_0x3bdcc8){return super['add'](_0x2c1f3f);}super['emitReserved']('decoded',_0x4f7d9d);}}